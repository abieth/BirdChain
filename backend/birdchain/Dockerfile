FROM openjdk:17

# 환경 변수 설정을 위한 ARG 설정
ARG MYSQL_PORT
ARG MYSQL_USERNAME
ARG MYSQL_PASSWORD
ARG AWS_CREDENTIALS_ACCESSKEY
ARG AWS_CREDENTIALS_SECRETKEY
ARG CORS_ORIGINS
ARG HIBERNATE_DDL_AUTO

# ARG로 받은 값을 환경 변수에 설정
ENV MYSQL_PORT=${MYSQL_PORT} \
    MYSQL_USERNAME=${MYSQL_USERNAME} \
    MYSQL_PASSWORD=${MYSQL_PASSWORD} \
    AWS_CREDENTIALS_ACCESSKEY=${AWS_CREDENTIALS_ACCESSKEY} \
    AWS_CREDENTIALS_SECRETKEY=${AWS_CREDENTIALS_SECRETKEY} \
    CORS_ORIGINS=${CORS_ORIGINS} \
    HIBERNATE_DDL_AUTO=${HIBERNATE_DDL_AUTO}

WORKDIR /app
COPY build/libs/*.jar app.jar
EXPOSE 8080
CMD ["java", "-jar", "app.jar"]

